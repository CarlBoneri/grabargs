---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# grabargs

<p align="center">
  <img src="./inst/grabby.gif" width="448" height="384" />
</p>

A very small package with only one real purpose: to import the `grab_args` function
into any package or *Shiny App*. I got tired of importing this function into all my
private packages, so deploying as a package itself. 

## Installation

You can install the released version of grabargs from [GitHub](https://github.com/CarlBoneri/grabargs) with:

```{r, echo=TRUE, eval=FALSE}
devtools::install_github("CarlBoneri/grabargs")
```

## Why this function is helpful  

Let's say you have a function with a ton of optional arguments. A good example is 
when building an **API** and the query params are mostly optional. Let's use twitter
as an example for [searching tweets](https://developer.twitter.com/en/docs/tweets/search/api-reference/get-search-tweets).

I'm not in the mood to write out all the params, so let's parse the doc:

```{r paged.print=TRUE}
library(xml2)

raw_page <- xml2::read_html("https://developer.twitter.com/en/docs/tweets/search/api-reference/get-search-tweets")

params_table <- xml_find_all(raw_page, ".//h2[contains(.,'Parameters')]//following-sibling::table") %>%
  rvest::html_table() %>% .[[1]] %>%  dplyr::rename_all(function(x){
    tolower(x) %>% gsub("(\\s+)", "_", ., perl = TRUE)
  })

# The description column is making this thing wrap way too much, so gonna truncate:
# 
params_table$description <- lapply(params_table$description, function(i){
    r <- stri_split_regex(i, "(?<=\\.|\\!|\\?)(\\s+)") %>% unlist()
    if(length(r) > 1){
        stri_join(r[1:2], collapse = " ")
    }else {
        r
    }
}) %>% unlist

knitr::kable(params_table %>% select(-default_value), align = "l")
```




